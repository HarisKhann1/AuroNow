<form
  action="{% url 'search_results' %}"
  method="GET"
  class="bg-transparent text-white border shadow-md rounded-lg lg:rounded-full px-4 py-2 w-full max-w-3xl mx-auto"
>
  <!-- Laptop/Desktop Layout -->
  <div id='desltop' class="hidden lg:flex lg:items-center lg:gap-0">
    <select name="category" class="bg-transparent border-none focus:outline-none appearance-none w-auto">
      <option value="" class="text-black">Category</option>
      {% for cat in categories %}
      <option class="text-black" value="{{ cat }}" {% if request.GET.category == cat %}selected{% endif %}>
        {{ cat }}
      </option>
      {% endfor %}
    </select>
    
    <span class="text-gray-500">|</span>

    <input type="text" name="shop_name" placeholder="Name" value="{{ request.GET.shop_name }}"
      class="bg-transparent placeholder:text-white outline-none border-none text-medium flex-grow" />

    <span class="text-gray-500">|</span>

    <select name="address" class="bg-transparent focus:bg-cyan-400 outline-none text-medium border-none appearance-none w-auto">
      <option value="">Location</option>
      {% for address in addresses %}
      <option value="{{ address }}" {% if request.GET.address == address %}selected{% endif %}>
        {{ address }}
      </option>
      {% endfor %}
    </select>

    <span class="text-gray-500">|</span>

    <select name="price" class="bg-transparent focus:bg-cyan-400 outline-none text-medium border-none appearance-none w-auto">
      <option value="">Price</option>
      {% for price in price_ranges %}
      <option value="{{ price }}" {% if request.GET.price == price %}selected{% endif %}>
        {{ price }}
      </option>
      {% endfor %}
    </select>

    <button type="submit" class="bg-primary-color text-gray-700 px-4 py-2 rounded-full hover:bg-primary-hover-color min-w-[100px]">
      Search
    </button>
  </div>

  <!-- Tablet Layout -->
  <div id='tablet' class="hidden md:flex md:flex-col lg:hidden gap-3">
    <div class="grid grid-cols-2 gap-3">
      <select name="category" class="bg-transparent focus:outline-none text-medium border-none appearance-none w-full">
        <option value="" class="text-black">Category</option>
        {% for cat in categories %}
        <option class="text-black" value="{{ cat }}" {% if request.GET.category == cat %}selected{% endif %}>
          {{ cat }}
        </option>
        {% endfor %}
      </select>

      <input type="text" name="shop_name" placeholder="Name" value="{{ request.GET.shop_name }}"
        class="bg-transparent placeholder:text-white outline-none border-none text-medium w-full" />

      <select name="address" class="bg-transparent focus:outline-none text-medium border-none appearance-none w-full">
        <option value="">Location</option>
        {% for address in addresses %}
        <option value="{{ address }}" {% if request.GET.address == address %}selected{% endif %}>
          {{ address }}
        </option>
        {% endfor %}
      </select>

      <select name="price" class="bg-transparent focus:outline-none text-medium border-none appearance-none w-full">
        <option value="">Price</option>
        {% for price in price_ranges %}
        <option value="{{ price }}" {% if request.GET.price == price %}selected{% endif %}>
          {{ price }}
        </option>
        {% endfor %}
      </select>
    </div>

    <button type="submit" class="bg-primary-color text-gray-700 px-4 py-2 rounded-lg hover:bg-primary-hover-color w-full md:w-1/2 mx-auto">
      Search
    </button>
  </div>

  <!-- Mobile Layout -->
  <div id='mobile' class="flex flex-col gap-2 md:hidden">
    <select name="category" class="bg-transparent focus:outline-none text-sm border-none appearance-none w-full py-2">
      <option value="" class="text-black">Category</option>
      {% for cat in categories %}
      <option class="text-black" value="{{ cat }}" {% if request.GET.category == cat %}selected{% endif %}>
        {{ cat }}
      </option>
      {% endfor %}
    </select>

    <input type="text" name="shop_name" placeholder="Name" value="{{ request.GET.shop_name }}"
      class="bg-transparent placeholder:text-white outline-none border-none text-medium w-full" />

    <select name="address" class="bg-transparent focus:outline-none text-sm border-none appearance-none w-full py-2">
      <option value="">Location</option>
      {% for address in addresses %}
      <option value="{{ address }}" {% if request.GET.address == address %}selected{% endif %}>
        {{ address }}
      </option>
      {% endfor %}
    </select>

    <select name="price" class="bg-transparent focus:outline-none text-sm border-none appearance-none w-full py-2">
      <option value="">Price</option>
      {% for price in price_ranges %}
      <option value="{{ price }}" {% if request.GET.price == price %}selected{% endif %}>
        {{ price }}
      </option>
      {% endfor %}
    </select>

    <button type="submit" class="bg-primary-color text-gray-700 px-4 py-2 rounded-lg hover:bg-primary-hover-color w-full mt-2">
      Search
    </button>
  </div>
</form>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    function updateFormInputs() {
      const desktopForm = document.querySelector("#desktop");
      const tabletForm = document.querySelector("#tablet");
      const mobileForm = document.querySelector("#mobile");
  
      let activeForm = null;
  
      if (window.innerWidth >= 1024) {
        activeForm = desktopForm;
      } else if (window.innerWidth >= 768) {
        activeForm = tabletForm;
      } else {
        activeForm = mobileForm;
      }
  
      if (!activeForm) return; // ðŸ›‘ Stop if no active form is found
  
      document.querySelectorAll("select, input").forEach((el) => {
        if (activeForm.contains(el)) {
          el.removeAttribute("disabled");
        } else {
          el.setAttribute("disabled", "true");
        }
        console.log("Active Form:", activeForm);
      });
    }
  
    updateFormInputs();
    window.addEventListener("resize", updateFormInputs);
  });

</script>